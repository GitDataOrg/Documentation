<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Справка по ZeroFrame API - ZeroNet [RU]</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  

  <link rel="stylesheet" href="../../css/fonts.css" type="text/css" />

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../docs.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Справка по ZeroFrame API";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../docs.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> ZeroNet [RU]</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Поискова фраза" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Введение</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../faq/">Часто задаваемые вопросы</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Запускаем ZeroNet</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../using_zeronet/installing/">Установка</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../using_zeronet/sample_sites/">Простой сайт</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../using_zeronet/create_new_site/">Создание сайта</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Разработка сайтов</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../getting_started/">Вступление</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Справка по ZeroFrame API</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#zeroframe-api">Справка по ZeroFrame API</a></li>
                
            
                <li class="toctree-l3"><a href="#_1">Обертка</a></li>
                
                    <li><a class="toctree-l4" href="#wrapperconfirm-message-button_caption">wrapperConfirm message, [button_caption]</a></li>
                
                    <li><a class="toctree-l4" href="#wrappergetlocalstorage">wrapperGetLocalStorage</a></li>
                
                    <li><a class="toctree-l4" href="#wrapperpermissionadd-permission">wrapperPermissionAdd permission</a></li>
                
                    <li><a class="toctree-l4" href="#wrappersetlocalstorage-data">wrapperSetLocalStorage data</a></li>
                
                    <li><a class="toctree-l4" href="#wrappernotification-type-message-timeout">wrapperNotification type, message, [timeout]</a></li>
                
                    <li><a class="toctree-l4" href="#wrapperprompt-message-type">wrapperPrompt message, [type]</a></li>
                
                    <li><a class="toctree-l4" href="#wrappersetviewport-viewport">wrapperSetViewport viewport</a></li>
                
            
                <li class="toctree-l3"><a href="#uiserver">UiServer</a></li>
                
                    <li><a class="toctree-l4" href="#certadd-domain-auth_type-auth_user_name-cert">certAdd domain, auth_type, auth_user_name, cert</a></li>
                
                    <li><a class="toctree-l4" href="#certselect-accepted_domains">certSelect accepted_domains</a></li>
                
                    <li><a class="toctree-l4" href="#channeljoin-channel">channelJoin channel</a></li>
                
                    <li><a class="toctree-l4" href="#dbquery-query">dbQuery query</a></li>
                
                    <li><a class="toctree-l4" href="#fileget-inner_path-required">fileGet inner_path, [required]</a></li>
                
                    <li><a class="toctree-l4" href="#filedelete-inner_path">fileDelete inner_path</a></li>
                
                    <li><a class="toctree-l4" href="#filequery-dir_inner_path-query">fileQuery dir_inner_path, query</a></li>
                
                    <li><a class="toctree-l4" href="#filerules-inner_path">fileRules inner_path</a></li>
                
                    <li><a class="toctree-l4" href="#filewrite-inner_path-content">fileWrite inner_path, content</a></li>
                
                    <li><a class="toctree-l4" href="#serverinfo">serverInfo</a></li>
                
                    <li><a class="toctree-l4" href="#siteinfo">siteInfo</a></li>
                
                    <li><a class="toctree-l4" href="#sitepublish-privatekey-inner_path-sign">sitePublish [privatekey], [inner_path], [sign]</a></li>
                
                    <li><a class="toctree-l4" href="#sitesign-privatekey-inner_path">siteSign [privatekey], [inner_path]</a></li>
                
                    <li><a class="toctree-l4" href="#siteupdate-address">siteUpdate address</a></li>
                
            
                <li class="toctree-l3"><a href="#plugin-cryptmessage">Plugin: CryptMessage</a></li>
                
                    <li><a class="toctree-l4" href="#userpublickey-index">userPublickey [index]</a></li>
                
                    <li><a class="toctree-l4" href="#eciesencrypt-text-publickey-return_aes_key">eciesEncrypt text, [publickey], [return_aes_key]</a></li>
                
                    <li><a class="toctree-l4" href="#eciesdecrypt-params-privatekey">eciesDecrypt params, [privatekey]</a></li>
                
                    <li><a class="toctree-l4" href="#aesencrypt-text-key-iv">aesEncrypt text, [key], [iv]</a></li>
                
                    <li><a class="toctree-l4" href="#aesdecrypt-iv-encrypted_text-key">aesDecrypt iv, encrypted_text, key</a></li>
                
                    <li><a class="toctree-l4" href="#aesdecrypt-encrypted_texts-keys">aesDecrypt encrypted_texts, keys</a></li>
                
            
                <li class="toctree-l3"><a href="#plugin-newsfeed">Plugin: Newsfeed</a></li>
                
                    <li><a class="toctree-l4" href="#feedfollow-feeds">feedFollow feeds</a></li>
                
                    <li><a class="toctree-l4" href="#feedlistfollow">feedListFollow</a></li>
                
                    <li><a class="toctree-l4" href="#feedquery">feedQuery</a></li>
                
            
                <li class="toctree-l3"><a href="#plugin-mergersite">Plugin: MergerSite</a></li>
                
                    <li><a class="toctree-l4" href="#mergersiteadd-addresses">mergerSiteAdd addresses</a></li>
                
                    <li><a class="toctree-l4" href="#mergersitedelete-address">mergerSiteDelete address</a></li>
                
                    <li><a class="toctree-l4" href="#mergersitelist-query_site_info">mergerSiteList [query_site_info]</a></li>
                
            
                <li class="toctree-l3"><a href="#admin-commands">Admin commands</a></li>
                
                    <li><a class="toctree-l4" href="#configset-key-value">configSet key, value</a></li>
                
                    <li><a class="toctree-l4" href="#certset-domain">certSet domain</a></li>
                
                    <li><a class="toctree-l4" href="#channeljoinallsite-channel">channelJoinAllsite channel</a></li>
                
                    <li><a class="toctree-l4" href="#serverportcheck">serverPortcheck</a></li>
                
                    <li><a class="toctree-l4" href="#servershutdown">serverShutdown</a></li>
                
                    <li><a class="toctree-l4" href="#serverupdate">serverUpdate</a></li>
                
                    <li><a class="toctree-l4" href="#siteclone-address">siteClone address</a></li>
                
                    <li><a class="toctree-l4" href="#sitelist">siteList</a></li>
                
                    <li><a class="toctree-l4" href="#sitepause-address">sitePause address</a></li>
                
                    <li><a class="toctree-l4" href="#siteresume-address">siteResume address</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../content_json/">Структура файла content.json</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dbschema_json/">Структура файла dbschema.json</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Помощь в разработке ZeroNet</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../help_zeronet/contributing/">Вклад в ZeroNet</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../help_zeronet/network_protocol/">Сетевой протокол</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../help_zeronet/donate/">Финансовая помощь</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">ZeroNet [RU]</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Документация ZeroNet</a> &raquo;</li>
    
      
        
          <li>Разработка сайтов &raquo;</li>
        
      
    
    <li>Справка по ZeroFrame API</li>
    <li class="wy-breadcrumbs-aside">
      <a href="http://www.gitdata.net" class="icon icon-home" target="_blank"> Сайт GitData</a>
      
        
          <a href="https://github.com/GitDataOrg/ZeroNetRU" class="icon icon-github" target="_blank"> Открыть в GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="zeroframe-api">Справка по ZeroFrame API</h1>
<h1 id="_1">Обертка</h1>
<p><em>Эти команды обрабатываются оберточной конструкцией и не отправляются на сервер с помощью WebSocket</em></p>
<h4 id="wrapperconfirm-message-button_caption">wrapperConfirm <em>message, [button_caption]</em></h4>
<p>Отображает уведомление с кнопой подтверждения</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>message</strong></td>
<td>Текст выводимого сообщения</td>
</tr>
<tr>
<td><strong>button_caption</strong> (опционально)</td>
<td>Надпись кнопки подтверждения (по умолчанию: OK)</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: True в случае нажатия на кнопку</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript"># Удалить сайт
siteDelete: (address) -&gt;
    site = @sites[address]
    title = site.content.title
    if title.length &gt; 40
        title = title.substring(0, 15)+&quot;...&quot;+title.substring(title.length-10)
    @cmd &quot;wrapperConfirm&quot;, [&quot;Вы уверены? &lt;b&gt;#{title}&lt;/b&gt;&quot;, &quot;Delete&quot;], (confirmed) =&gt;
        @log &quot;Deleting #{site.address}...&quot;, confirmed
        if confirmed
            $(&quot;.site-#{site.address}&quot;).addClass(&quot;deleted&quot;)
            @cmd &quot;siteDelete&quot;, {&quot;address&quot;: address}
</code></pre>

<hr />
<h4 id="wrappergetlocalstorage">wrapperGetLocalStorage</h4>
<p><strong>Результат</strong>: Локальное хранилище браузера для сайта</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">@cmd &quot;wrapperGetLocalStorage&quot;, [], (res) =&gt;
    res ?= {}
    @log &quot;Значение в локальном хранилище:&quot;, res
</code></pre>

<hr />
<h4 id="wrapperpermissionadd-permission">wrapperPermissionAdd <em>permission</em></h4>
<p>Запрашивает права доступа для сайта</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>permission</strong></td>
<td>Наименование набора прав доступа (на пример. Merger:ZeroMe)</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="wrappersetlocalstorage-data">wrapperSetLocalStorage <em>data</em></h4>
<p>Устанавливает локальное хранилище для сайта</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>data</strong></td>
<td>Любая структура данных, которую вам необходимо держать в хранилище</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: не возвращается</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">Page.local_storage[&quot;topic.#{@topic_id}_#{@topic_user_id}.visited&quot;] = Time.timestamp()
Page.cmd &quot;wrapperSetLocalStorage&quot;, Page.local_storage
</code></pre>

<hr />
<h4 id="wrappernotification-type-message-timeout">wrapperNotification <em>type, message, [timeout]</em></h4>
<p>Выводит уведомление</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Доступные типы сообщений: info, error, done</td>
</tr>
<tr>
<td><strong>message</strong></td>
<td>Текст выводимого сообщения</td>
</tr>
<tr>
<td><strong>timeout</strong> (опционально)</td>
<td>Скрыть сообщение по окончанию интервала (в милисекундах)</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: не возвращается</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">@cmd &quot;wrapperNotification&quot;, [&quot;done&quot;, &quot;Ваша регистрационные данные были отправлены!&quot;, 10000]
</code></pre>

<hr />
<h4 id="wrapperprompt-message-type">wrapperPrompt <em>message, [type]</em></h4>
<p>Запрашивает у пользователя ввод текста</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>message</strong></td>
<td>Текст выводимого сообщения</td>
</tr>
<tr>
<td><strong>type</strong> (optional)</td>
<td>Тип вводимого значения (по умолчанию: text)</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: Введенное значение</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript"># Запрос секретного ключа
@cmd &quot;wrapperPrompt&quot;, [&quot;Пожалуйста, введите ваш секретный ключ:&quot;, &quot;password&quot;], (privatekey) =&gt;
    $(&quot;.publishbar .button&quot;).addClass(&quot;loading&quot;)
    # Отправка подписанного content.json и отправка серверу запроса на публикацию
    @cmd &quot;sitePublish&quot;, [privatekey], (res) =&gt;
        $(&quot;.publishbar .button&quot;).removeClass(&quot;loading&quot;)
        @log &quot;Реузльтат публикации:&quot;, res
</code></pre>

<h4 id="wrappersetviewport-viewport">wrapperSetViewport <em>viewport</em></h4>
<p>Установка мета-тега <code>viewport</code> (необходимо для мобильных устройств)</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>viewport</strong></td>
<td>Значение тега <code>viewport</code></td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: None</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript"># Установка мета-тега viewport
@cmd &quot;wrapperSetViewport&quot;, &quot;width=device-width, initial-scale=1.0&quot;
</code></pre>

<hr />
<h1 id="uiserver">UiServer</h1>
<p>UiServer для ZeroNet как серверный набор LAMP для обычных сайтов.</p>
<p>UiServer делает всю работу 'бэкенда' (на пример: запросы к базе данных, доступ к файловым ресурсам и так далее). Он содержить вызов API, необходимые для создания динамического контента сайтов.</p>
<h4 id="certadd-domain-auth_type-auth_user_name-cert">certAdd <em>domain, auth_type, auth_user_name, cert</em></h4>
<p>Создает новые сертификат для текущего пользователя.</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>domain</strong></td>
<td>Домен, для которого выпускается сертификат</td>
</tr>
<tr>
<td><strong>auth_type</strong></td>
<td>Способ авторизации при регистрации</td>
</tr>
<tr>
<td><strong>auth_user_name</strong></td>
<td>Логин пользователя при регистрации</td>
</tr>
<tr>
<td><strong>cert</strong></td>
<td>Сам сертификат: <code>auth_address#auth_type/auth_user_name</code> строка, подписанная сертификатом владельца сайта</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: "ok", "Not changed" или ошибку {"error": error_message}</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">@cmd &quot;certAdd&quot;, [&quot;zeroid.bit&quot;, auth_type, user_name, cert_sign], (res) =&gt;
    $(&quot;.ui&quot;).removeClass(&quot;flipped&quot;)
    if res.error
        @cmd &quot;wrapperNotification&quot;, [&quot;error&quot;, &quot;#{res.error}&quot;]
</code></pre>

<hr />
<h4 id="certselect-accepted_domains">certSelect <em>accepted_domains</em></h4>
<p>Отображение выбора сертификата.</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>accepted_domains</strong></td>
<td>Список доменов, принимающих в качестве поставщиков авторизации</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: не возвращается</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">@cmd &quot;certSelect&quot;, {&quot;accepted_domains&quot;: [&quot;zeroid.bit&quot;]}
</code></pre>

<hr />
<h4 id="channeljoin-channel">channelJoin <em>channel</em></h4>
<p>Запрос уведомлений о событиях сайта.</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>channel</strong></td>
<td>Используемый канал</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: None</p>
<p><strong>Каналы</strong>:</p>
<ul>
<li><strong>siteChanged</strong> (используется по умолчанию)<br>События: peers_added, file_started, file_done, file_failed</li>
</ul>
<p><strong>Пример</strong>:</p>
<pre><code class="coffeescript"># Подключение через WebSocket готово
onOpenWebsocket: (e) =&gt;
    @cmd &quot;channelJoinAllsite&quot;, {&quot;channel&quot;: &quot;siteChanged&quot;}

# Маршрутизация входящих запросов и сообщений
route: (cmd, data) -&gt;
    if cmd == &quot;setSiteInfo&quot;
        @log &quot;Сайт изменен&quot;, data
    else
        @log &quot;неизвестная команда&quot;, cmd, data
</code></pre>

<p><strong>Пример данных события</strong></p>
<pre><code class="json">{
    &quot;tasks&quot;:0,
    &quot;size_limit&quot;:10,
    &quot;address&quot;:&quot;1RivERqttrjFqwp9YH1FviduBosQPtdBN&quot;,
    &quot;next_size_limit&quot;:10,
    &quot;event&quot;:[ &quot;file_done&quot;, &quot;index.html&quot; ],
    [...] # Идентично возвращаемому значению siteInfo (см. описание далее)
}

</code></pre>

<hr />
<h4 id="dbquery-query">dbQuery <em>query</em></h4>
<p>Запуск запроса к кэшу SQL</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>query</strong></td>
<td>Команда SQL</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: <list> Результат запроса</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">@log &quot;Обновление информации о пользователе...&quot;, @my_address
Page.cmd &quot;dbQuery&quot;, [&quot;SELECT user.*, json.json_id AS data_json_id FROM user LEFT JOIN json USING(path) WHERE path='#{@my_address}/data.json'&quot;], (res) =&gt;
    if res.error or res.length == 0 # База данных еще не готова или пользователь не найден
        $(&quot;.head-user.visitor&quot;).css(&quot;display&quot;, &quot;&quot;)
        $(&quot;.user_name-my&quot;).text(&quot;Посетитель&quot;)
        if cb then cb()
        return

    @my_row = res[0]
    @my_id = @my_row[&quot;user_id&quot;]
    @my_name = @my_row[&quot;user_name&quot;]
    @my_max_size = @my_row[&quot;max_size&quot;]
</code></pre>

<hr />
<h4 id="fileget-inner_path-required">fileGet <em>inner_path, [required]</em></h4>
<p>Получает содержимое файла</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>inner_path</strong></td>
<td>Имя запрашиваемого файла</td>
</tr>
<tr>
<td><strong>required</strong> (опционально)</td>
<td>Ожидание создания файла в случае его отсутствия (по умолчанию: True).</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: <string> Содержимое запрошенного файла</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript"># Голосование в теме ZeroTalk
submitTopicVote: (e) =&gt;
    if not Users.my_name # Не зарегистрирован
        Page.cmd &quot;wrapperNotification&quot;, [&quot;info&quot;, &quot;Пожалуйста, получите доступ для публикации.&quot;]
        return false

    elem = $(e.currentTarget)
    elem.toggleClass(&quot;active&quot;).addClass(&quot;loading&quot;)
    inner_path = &quot;data/users/#{Users.my_address}/data.json&quot;

    Page.cmd &quot;fileGet&quot;, [inner_path], (data) =&gt;
        data = JSON.parse(data)
        data.topic_votes ?= {} # Создать в случае отсутствия
        topic_address = elem.parents(&quot;.topic&quot;).data(&quot;topic_address&quot;)

        if elem.hasClass(&quot;active&quot;) # Добавить голосование по теме
            data.topic_votes[topic_address] = 1
        else # Удаление голосование по теме
            delete data.topic_votes[topic_address]

        # Запись в файл и публикация другим пользователям
        Page.writePublish inner_path, Page.jsonEncode(data), (res) =&gt;
            elem.removeClass(&quot;loading&quot;)
            if res == true
                @log &quot;Файл записан&quot;
            else # Failed
                elem.toggleClass(&quot;active&quot;) # Возвращаем состояние

    return false
</code></pre>

<hr />
<h4 id="filedelete-inner_path">fileDelete <em>inner_path</em></h4>
<p>Удаление файла</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>inner_path</strong></td>
<td>Имя файла, подлежащего удалению</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: "ok" в случае успешного удаления или сообщение об ошибке</p>
<hr />
<h4 id="filequery-dir_inner_path-query">fileQuery <em>dir_inner_path, query</em></h4>
<p>Простая команда запроса файла json</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>dir_inner_path</strong></td>
<td>Директория запрашиваемого файла</td>
</tr>
<tr>
<td><strong>query</strong></td>
<td>Команда запроса</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: <list> Удовлетворяющий запросу контент</p>
<p><strong>Пример запроса:</strong></p>
<ul>
<li><code>["data/users/*/data.json", "topics"]</code>: Возвращает все сообщения по теме от всех пользоваталей</li>
<li><code>["data/users/*/data.json", "comments.1@2"]</code>: Возвращает значения <code>user_data["comments"]["1@2"]</code> от всех пользателей</li>
<li><code>["data/users/*/data.json", ""]</code>: Возвращает все данные из файлов пользователей</li>
</ul>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">@cmd &quot;fileQuery&quot;, [&quot;data/users/*/data.json&quot;, &quot;topics&quot;], (topics) =&gt;
    topics.sort (a, b) -&gt; # Сортировка по дате
        return a.added - b.added
    for topic in topics
        @log topic.topic_id, topic.inner_path, topic.title
</code></pre>

<hr />
<h4 id="filerules-inner_path">fileRules <em>inner_path</em></h4>
<p>Получение правил для файлов</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>inner_path</strong></td>
<td>Путь к файлу</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: <list> Удовлетворяющий запросу контент</p>
<p><strong>Пример результата:</strong></p>
<pre><code class="json">{
    &quot;current_size&quot;: 2485,
    &quot;cert_signers&quot;: {&quot;zeroid.bit&quot;: [&quot;1iD5ZQJMNXu43w1qLB8sfdHVKppVMduGz&quot;]},
    &quot;files_allowed&quot;: &quot;data.json&quot;,
    &quot;signers&quot;: [&quot;1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj&quot;],
    &quot;user_address&quot;: &quot;1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj&quot;,
    &quot;max_size&quot;: 100000
}
</code></pre>

<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">@cmd &quot;fileRules&quot;, &quot;data/users/1J3rJ8ecnwH2EPYa6MrgZttBNc61ACFiCj/content.json&quot;, (rules) =&gt;
    @log rules
</code></pre>

<hr />
<h4 id="filewrite-inner_path-content">fileWrite <em>inner_path, content</em></h4>
<p>Запись содержимого файла</p>
<table>
<thead>
<tr>
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>inner_path</strong></td>
<td>Путь к файлу</td>
</tr>
<tr>
<td><strong>content</strong></td>
<td>Содержимое записываемого файла (в кодировке <a href="https://ru.wikipedia.org/wiki/Base64">base64</a>)</td>
</tr>
</tbody>
</table>
<p><strong>Результат</strong>: "ok" в случае успешной записи или сообщение об ошибке</p>
<p><strong>Пример:</strong></p>
<pre><code class="coffeescript">writeData: (cb=null) -&gt;
    # В формате json в кодировке utf8
    json_raw = unescape(encodeURIComponent(JSON.stringify({&quot;hello&quot;: &quot;ZeroNet&quot;}, undefined, '\t')))
    # Кодирование в base64 и отправка
    @cmd &quot;fileWrite&quot;, [&quot;data.json&quot;, btoa(json_raw)], (res) =&gt;
        if res == &quot;ok&quot;
            if cb then cb(true)
        else
            @cmd &quot;wrapperNotification&quot;, [&quot;error&quot;, &quot;File write error: #{res}&quot;]
            if cb then cb(false)
</code></pre>

<p><em>Заметка:</em> для записи файлов, отсутствующих в <code>content.json</code>, вы должны указать параметр <code>"own": true</code> в <code>data/sites.json</code> на сайте, в который вы ходите записать</p>
<hr />
<h4 id="serverinfo">serverInfo</h4>
<p><strong>Return:</strong> <dict> All information about the server</p>
<p><strong>Example:</strong></p>
<pre><code class="coffeescript">@cmd &quot;serverInfo&quot;, {}, (server_info) =&gt;
    @log &quot;Server info:&quot;, server_info
</code></pre>

<p><strong>Example return value:</strong></p>
<pre><code class="json">{
    &quot;debug&quot;: true, # Running in debug mode
    &quot;fileserver_ip&quot;: &quot;*&quot;, # Fileserver binded to
    &quot;fileserver_port&quot;: 15441, # FileServer port
    &quot;ip_external&quot;: true, # Active of passive mode
    &quot;platform&quot;: &quot;win32&quot;, # Operating system
    &quot;ui_ip&quot;: &quot;127.0.0.1&quot;, # UiServer binded to
    &quot;ui_port&quot;: 43110, # UiServer port (Web)
    &quot;version&quot;: &quot;0.2.5&quot; # Version
}
</code></pre>

<hr />
<h4 id="siteinfo">siteInfo</h4>
<p><strong>Return</strong>: <dict> All information about the site</p>
<p><strong>Example:</strong></p>
<pre><code class="coffeescript">@cmd &quot;siteInfo&quot;, {}, (site_info) =&gt;
    @log &quot;Site info:&quot;, site_info
</code></pre>

<p><strong>Example return value:</strong></p>
<pre><code class="json">{
    &quot;tasks&quot;: 0, # Number of files currently under download
    &quot;size_limit&quot;: 10, # Current site size limit in MB
    &quot;address&quot;: &quot;1EU1tbG9oC1A8jz2ouVwGZyQ5asrNsE4Vr&quot;, # Site address
    &quot;next_size_limit&quot;: 10, # Size limit required by sum of site's files
    &quot;auth_address&quot;: &quot;2D6xXUmCVAXGrbVUGRRJdS4j1hif1EMfae&quot;, # Current user's bitcoin address
    &quot;auth_key_sha512&quot;: &quot;269a0f4c1e0c697b9d56ccffd9a9748098e51acc5d2807adc15a587779be13cf&quot;, # Deprecated, dont use
    &quot;peers&quot;: 14, # Peers of site
    &quot;auth_key&quot;: &quot;pOBdl00EJ29Ad8OmVIc763k4&quot;, # Deprecated, dont use
    &quot;settings&quot;:  {
        &quot;peers&quot;: 13, # Saved peers num for sorting
        &quot;serving&quot;: true, # Site enabled
        &quot;modified&quot;: 1425344149.365, # Last modification time of all site's files
        &quot;own&quot;: true, # Own site
        &quot;permissions&quot;: [&quot;ADMIN&quot;], # Site's permission
        &quot;size&quot;: 342165 # Site total size in bytes
    },
    &quot;bad_files&quot;: 0, # Files that needs to be download
    &quot;workers&quot;: 0, # Current concurent downloads
    &quot;content&quot;: { # Root content.json
        &quot;files&quot;: 12, # Number of file, detailed file info removed to reduce data transfer and parse time
        &quot;description&quot;: &quot;This site&quot;,
        &quot;title&quot;: &quot;ZeroHello&quot;,
        &quot;signs_required&quot;: 1,
        &quot;modified&quot;: 1425344149.365,
        &quot;ignore&quot;: &quot;(js|css)/(?!all.(js|css))&quot;,
        &quot;signers_sign&quot;: null,
        &quot;address&quot;: &quot;1EU1tbG9oC1A8jz2ouVwGZyQ5asrNsE4Vr&quot;,
        &quot;zeronet_version&quot;: &quot;0.2.5&quot;,
        &quot;includes&quot;: 0
    },
    &quot;cert_user_id&quot;: &quot;zeronetuser@zeroid.bit&quot;, # Currently selected certificate for the site
    &quot;started_task_num&quot;: 1, # Last number of files downloaded
    &quot;content_updated&quot;: 1426008289.71 # Content.json update time
}
</code></pre>

<hr />
<h4 id="sitepublish-privatekey-inner_path-sign">sitePublish <em>[privatekey], [inner_path], [sign]</em></h4>
<p>Publish a content.json of the site</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>privatekey</strong> (optional)</td>
<td>Private key used for signing (default: current user's privatekey)</td>
</tr>
<tr>
<td><strong>inner_path</strong> (optional)</td>
<td>Inner path of the content json you want to publish (default: content.json)</td>
</tr>
<tr>
<td><strong>sign</strong> (optional)</td>
<td>If True then sign the content.json before publish (default: True)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: "ok" on success else the error message</p>
<p><strong>Example:</strong></p>
<pre><code class="coffeescript"># Prompt the private key
@cmd &quot;wrapperPrompt&quot;, [&quot;Enter your private key:&quot;, &quot;password&quot;], (privatekey) =&gt;
    $(&quot;.publishbar .button&quot;).addClass(&quot;loading&quot;)
    # Send sign content.json and publish request to server
    @cmd &quot;sitePublish&quot;, [privatekey], (res) =&gt;
        $(&quot;.publishbar .button&quot;).removeClass(&quot;loading&quot;)
        @log &quot;Publish result:&quot;, res
</code></pre>

<hr />
<h4 id="sitesign-privatekey-inner_path">siteSign <em>[privatekey], [inner_path]</em></h4>
<p>Sign a content.json of the site</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>privatekey</strong> (optional)</td>
<td>Private key used for signing (default: current user's privatekey)</td>
</tr>
<tr>
<td><strong>inner_path</strong> (optional)</td>
<td>Inner path of the content json you want to sign (default: content.json)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: "ok" on success else the error message</p>
<blockquote>
<p><strong>Note:</strong>
Use "stored" as privatekey if its definied in users.json (eg. cloned sites)</p>
</blockquote>
<p><strong>Example:</strong></p>
<pre><code class="coffeescript">if @site_info[&quot;privatekey&quot;] # Private key stored in users.json
    @cmd &quot;siteSign&quot;, [&quot;stored&quot;, &quot;content.json&quot;], (res) =&gt;
        @log &quot;Sign result&quot;, res
</code></pre>

<hr />
<h4 id="siteupdate-address">siteUpdate <em>address</em></h4>
<p>Force check and download changed content from other peers (only necessary if user is in passive mode and using old version of Zeronet)</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>address</strong></td>
<td>Address of site want to update (only current site allowed without site ADMIN permission)</td>
</tr>
</tbody>
</table>
<p><strong>Return:</strong> None</p>
<p><strong>Example:</strong></p>
<pre><code class="coffeescript"># Manual site update for passive connections
updateSite: =&gt;
    $(&quot;#passive_error a&quot;).addClass(&quot;loading&quot;).removeClassLater(&quot;loading&quot;, 1000)
    @log &quot;Updating site...&quot;
    @cmd &quot;siteUpdate&quot;, {&quot;address&quot;: @site_info.address}
</code></pre>

<hr />
<h1 id="plugin-cryptmessage">Plugin: CryptMessage</h1>
<h4 id="userpublickey-index">userPublickey <em>[index]</em></h4>
<p>Get user's site specific publickey</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>index</strong> (optional)</td>
<td>Sub-publickey within site (default: 0)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: base64 encoded publickey</p>
<hr />
<h4 id="eciesencrypt-text-publickey-return_aes_key">eciesEncrypt <em>text, [publickey], [return_aes_key]</em></h4>
<p>Encrypt a text using a publickey</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>text</strong></td>
<td>Text to encrypt</td>
</tr>
<tr>
<td><strong>publickey</strong> (optional)</td>
<td>User's publickey index (int) or base64 encoded publickey (default: 0)</td>
</tr>
<tr>
<td><strong>return_aes_key</strong> (optional)</td>
<td>Get the AES key used in encryption (default: False)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: Encrypted text in base64 format or [Encrypted text in base64 format, AES key in base64 format]</p>
<hr />
<h4 id="eciesdecrypt-params-privatekey">eciesDecrypt <em>params, [privatekey]</em></h4>
<p>Try to decrypt list of texts</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>params</strong></td>
<td>A text or list of encrypted texts</td>
</tr>
<tr>
<td><strong>privatekey</strong> (optional)</td>
<td>User's privatekey index (int) or base64 encoded privatekey (default: 0)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: Decrypted text or list of decrypted texts (null for failed decodings)</p>
<hr />
<h4 id="aesencrypt-text-key-iv">aesEncrypt <em>text, [key], [iv]</em></h4>
<p>Encrypt a text using the key and the iv</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>text</strong></td>
<td>A text encrypt using AES</td>
</tr>
<tr>
<td><strong>key</strong> (optional)</td>
<td>Base64 encoded password (default: generate new)</td>
</tr>
<tr>
<td><strong>iv</strong> (optional)</td>
<td>Base64 encoded iv (default: generate new)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: [base64 encoded key, base64 encoded iv, base64 encoded encrypted text]</p>
<hr />
<h4 id="aesdecrypt-iv-encrypted_text-key">aesDecrypt <em>iv, encrypted_text, key</em></h4>
<h4 id="aesdecrypt-encrypted_texts-keys">aesDecrypt <em>encrypted_texts, keys</em></h4>
<p>Decrypt text using the IV and AES key</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>iv</strong></td>
<td>IV in Base64 format</td>
</tr>
<tr>
<td><strong>encrypted_text</strong></td>
<td>Encrypted text in Base64 format</td>
</tr>
<tr>
<td><strong>encrypted_texts</strong></td>
<td>List of [base64 encoded iv, base64 encoded encrypted text] pairs</td>
</tr>
<tr>
<td><strong>key</strong></td>
<td>Base64 encoded password for the text</td>
</tr>
<tr>
<td><strong>keys</strong></td>
<td>Keys for decoding (tries every one for every pairs)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: Decoded text or list of decoded texts</p>
<hr />
<h1 id="plugin-newsfeed">Plugin: Newsfeed</h1>
<h4 id="feedfollow-feeds">feedFollow <em>feeds</em></h4>
<p>Set followed sql queries.</p>
<p>The SQL query should result in rows with cols:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>type</strong></td>
<td>Type: post, article, comment, mention</td>
</tr>
<tr>
<td><strong>date_added</strong></td>
<td>Event time</td>
</tr>
<tr>
<td><strong>title</strong></td>
<td>Event's first line to be displayed</td>
</tr>
<tr>
<td><strong>body</strong></td>
<td>Event's second and third line</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td>Link to event's page</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>feeds</strong></td>
<td>Format: {"query name": [SQL query, [param1, param2, ...], ...}, parameters will be escaped, joined by <code>,</code> inserted in place of <code>:params</code> in the Sql query.</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: ok</p>
<p><strong>Example:</strong></p>
<pre><code class="coffeescript"># Follow ZeroBlog posts
query = &quot;
    SELECT
     post_id AS event_uri,
     'post' AS type,
     date_published AS date_added,
     title AS title,
     body AS body,
     '?Post:' || post_id AS url
    FROM post
&quot;
params = [&quot;&quot;]
Page.cmd feedFollow [{&quot;Posts&quot;: [query, params]}]
</code></pre>

<hr />
<h4 id="feedlistfollow">feedListFollow</h4>
<p>Return of current followed feeds</p>
<p><strong>Return</strong>: The currently followed feeds in the same format as in the feedFollow commands</p>
<hr />
<h4 id="feedquery">feedQuery</h4>
<p>Execute all followed sql query</p>
<p><strong>Return</strong>: The result of the followed Sql queries</p>
<hr />
<h1 id="plugin-mergersite">Plugin: MergerSite</h1>
<h4 id="mergersiteadd-addresses">mergerSiteAdd <em>addresses</em></h4>
<p>Start downloading new merger site(s)</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>addresses</strong></td>
<td>Site address or list of site addresses</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="mergersitedelete-address">mergerSiteDelete <em>address</em></h4>
<p>Stop seeding and delete a merged site</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>address</strong></td>
<td>Site address</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="mergersitelist-query_site_info">mergerSiteList <em>[query_site_info]</em></h4>
<p>Return merged sites.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>query_site_info</strong></td>
<td>If True, then gives back detailed site info for merged sites</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="admin-commands">Admin commands</h1>
<p><em>(requires ADMIN permission in data/sites.json)</em></p>
<hr />
<h4 id="configset-key-value">configSet <em>key, value</em></h4>
<p>Create or update an entry in ZeroNet config file. (zeronet.conf by default)</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>key</strong></td>
<td>Configuration entry name</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>Configuration entry new value</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: ok</p>
<hr />
<h4 id="certset-domain">certSet <em>domain</em></h4>
<p>Set the used certificate for current site.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>domain</strong></td>
<td>Domain of the certificate issuer</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: None</p>
<hr />
<h4 id="channeljoinallsite-channel">channelJoinAllsite <em>channel</em></h4>
<p>Request notifications about every site's events.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>channel</strong></td>
<td>Channel to join (see channelJoin)</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: None</p>
<hr />
<h4 id="serverportcheck">serverPortcheck</h4>
<p>Start checking if port is opened</p>
<p><strong>Return</strong>: True (port opened) or False (port closed)</p>
<hr />
<h4 id="servershutdown">serverShutdown</h4>
<p>Stop running ZeroNet client.</p>
<p><strong>Return</strong>: None</p>
<hr />
<h4 id="serverupdate">serverUpdate</h4>
<p>Re-download ZeroNet from github.</p>
<p><strong>Return</strong>: None</p>
<hr />
<h4 id="siteclone-address">siteClone <em>address</em></h4>
<p>Copy site files into a new one.</p>
<p>Every file and directory will be skipped if it has a <code>-default</code> subfixed version and the subfixed version will be copied instead of it.</p>
<p>Eg. If you have a <code>data</code> and a <code>data-default</code> directory: The <code>data</code> directory will not be copied and the <code>data-default</code> directory will be renamed to data.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>address</strong></td>
<td>Address of site want to clone</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: None, automatically redirects to new site on completion</p>
<hr />
<h4 id="sitelist">siteList</h4>
<p><strong>Return</strong>: <list> SiteInfo list of all downloaded sites</p>
<hr />
<h4 id="sitepause-address">sitePause <em>address</em></h4>
<p>Pause site serving</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>address</strong></td>
<td>Address of site want to pause</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: None</p>
<hr />
<h4 id="siteresume-address">siteResume <em>address</em></h4>
<p>Resume site serving</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>address</strong></td>
<td>Address of site want to resume</td>
</tr>
</tbody>
</table>
<p><strong>Return</strong>: None</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../content_json/" class="btn btn-neutral float-right" title="Структура файла content.json"/>Вперед <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../getting_started/" class="btn btn-neutral" title="Вступление"><span class="icon icon-circle-arrow-left"></span> Назад</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../getting_started/" style="color: #fcfcfc;">&laquo; Назад</a></span>
      
      
        <span style="margin-left: 15px"><a href="../content_json/" style="color: #fcfcfc">Вперед &raquo;</a></span>
      
    </span>
</div>
<!-- Yandex.Metrika counter --> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter39528755 = new Ya.Metrika({ id:39528755, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/39528755" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
<!-- Google.Analytics counter -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-78510632-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- /Google.Analytics counter -->

</body>
</html>
